{"version":3,"sources":["webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?e9f9","webpack:///./src/views/login/index.vue"],"names":["login","name","data","username","password","image_code","image","isClick","mounted","localStorage","getItem","this","check_login","setInterval","reset_image","methods","Math","random","_this","postData","$store","dispatch","then","resp","$cookies","set","avatar","uid","nickname","$router","push","path","setTimeout","beforeCreate","document","body","classList","add","beforeDestroy","remove","views_login","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","on","submit","$event","preventDefault","directives","rawName","value","expression","attrs","type","placeholder","domProps","input","target","composing","src","alt","click","disabled","_e","staticRenderFns","href","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/12.8ab07ed8b3733cea4516.js","sourcesContent":["<template>\n  <div class=\"login-box\">\n    <div class=\"login-logo\"><a href=\"#\">Vue-Flask-Admin</a></div>\n    <div class=\"login-box-body\">\n      <p class=\"login-box-msg\">请填写用户名密码登陆系统</p>\n      <form @submit.prevent=\"check_login\" >\n        <div class=\"form-group has-feedback\">\n          <input type=\"text\" class=\"form-control\" v-model=\"username\" placeholder=\"用户名\">\n          <span class=\"glyphicon form-control-feedback fa fa-user fa-lg\"></span>\n        </div>\n        <div class=\"form-group has-feedback\">\n          <input type=\"password\" class=\"form-control\" v-model=\"password\" placeholder=\"密码\">\n          <span class=\"glyphicon form-control-feedback fa fa-lock fa-lg\"></span>\n        </div>\n        <div class=\"row form-group\">\n          <div class=\"col-xs-6\">\n            <input class=\"form-control\" v-model=\"image_code\" placeholder=\"验证码\"></div>\n          <div class=\"col-xs-4\">\n            <img :src=\"image\" alt=\"captcha\" @click=\"reset_image\" />\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-xs-8\"></div>\n          <div class=\"col-xs-4\">\n            <button type=\"submit\" :disabled=\"isClick\" class=\"btn btn-primary btn-block btn-flat login\">\n              <i v-if=\"isClick\" class='fa fa-spinner fa-spin '></i> 登陆\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: \"Login\",\n    data(){\n      return {\n        username:'',\n        password:'',\n        image_code:'',\n        image:'/api/image_code',\n        isClick:false\n      }\n    },\n    mounted(){\n      const token = localStorage.getItem('token')\n      if (token){\n        this.check_login()\n      }\n      setInterval(this.reset_image,180000)\n    },\n    methods:{\n      reset_image(){\n        this.image = '/api/image_code?rnd='+ Math.random()\n      },\n      // 检查登陆\n      check_login(){\n        this.isClick = true\n        const postData = {\n          username: this.username,\n          password: this.password,\n          image_code: this.image_code\n        }\n        this.$store.dispatch('user/checkLogin', postData).then( resp =>{\n          if (resp){\n            this.$cookies.set('avatar', resp.data.avatar)\n            this.$cookies.set('uid',resp.data.uid)\n            this.$cookies.set('username', resp.data.nickname || resp.data.username)\n            this.$router.push({ path:'/admin'})\n          }else{\n            this.reset_image()\n          }\n        })\n        setTimeout(() =>{\n          this.isClick = false\n        },1000)\n      }\n    },\n    beforeCreate:function () {\n      document.body.classList.add('login-page')\n    },\n    beforeDestroy:function () {\n      document.body.classList.remove('login-page')\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-box\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"login-box-body\"},[_c('p',{staticClass:\"login-box-msg\"},[_vm._v(\"请填写用户名密码登陆系统\")]),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.check_login($event)}}},[_c('div',{staticClass:\"form-group has-feedback\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"用户名\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"glyphicon form-control-feedback fa fa-user fa-lg\"})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group has-feedback\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"placeholder\":\"密码\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_vm._v(\" \"),_c('span',{staticClass:\"glyphicon form-control-feedback fa fa-lock fa-lg\"})]),_vm._v(\" \"),_c('div',{staticClass:\"row form-group\"},[_c('div',{staticClass:\"col-xs-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.image_code),expression:\"image_code\"}],staticClass:\"form-control\",attrs:{\"placeholder\":\"验证码\"},domProps:{\"value\":(_vm.image_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.image_code=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"col-xs-4\"},[_c('img',{attrs:{\"src\":_vm.image,\"alt\":\"captcha\"},on:{\"click\":_vm.reset_image}})])]),_vm._v(\" \"),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-8\"}),_vm._v(\" \"),_c('div',{staticClass:\"col-xs-4\"},[_c('button',{staticClass:\"btn btn-primary btn-block btn-flat login\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isClick}},[(_vm.isClick)?_c('i',{staticClass:\"fa fa-spinner fa-spin \"}):_vm._e(),_vm._v(\" 登陆\\n          \")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-logo\"},[_c('a',{attrs:{\"href\":\"#\"}},[_vm._v(\"Vue-Flask-Admin\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bcc171c0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/login/index.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bcc171c0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
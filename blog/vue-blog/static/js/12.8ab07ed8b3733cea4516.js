webpackJsonp([12],{"T+/8":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s={name:"Login",data:function(){return{username:"",password:"",image_code:"",image:"/api/image_code",isClick:!1}},mounted:function(){localStorage.getItem("token")&&this.check_login(),setInterval(this.reset_image,18e4)},methods:{reset_image:function(){this.image="/api/image_code?rnd="+Math.random()},check_login:function(){var e=this;this.isClick=!0;var a={username:this.username,password:this.password,image_code:this.image_code};this.$store.dispatch("user/checkLogin",a).then(function(a){a?(e.$cookies.set("avatar",a.data.avatar),e.$cookies.set("uid",a.data.uid),e.$cookies.set("username",a.data.nickname||a.data.username),e.$router.push({path:"/admin"})):e.reset_image()}),setTimeout(function(){e.isClick=!1},1e3)}},beforeCreate:function(){document.body.classList.add("login-page")},beforeDestroy:function(){document.body.classList.remove("login-page")}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"login-box"},[e._m(0),e._v(" "),t("div",{staticClass:"login-box-body"},[t("p",{staticClass:"login-box-msg"},[e._v("请填写用户名密码登陆系统")]),e._v(" "),t("form",{on:{submit:function(a){return a.preventDefault(),e.check_login(a)}}},[t("div",{staticClass:"form-group has-feedback"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(a){a.target.composing||(e.username=a.target.value)}}}),e._v(" "),t("span",{staticClass:"glyphicon form-control-feedback fa fa-user fa-lg"})]),e._v(" "),t("div",{staticClass:"form-group has-feedback"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(a){a.target.composing||(e.password=a.target.value)}}}),e._v(" "),t("span",{staticClass:"glyphicon form-control-feedback fa fa-lock fa-lg"})]),e._v(" "),t("div",{staticClass:"row form-group"},[t("div",{staticClass:"col-xs-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.image_code,expression:"image_code"}],staticClass:"form-control",attrs:{placeholder:"验证码"},domProps:{value:e.image_code},on:{input:function(a){a.target.composing||(e.image_code=a.target.value)}}})]),e._v(" "),t("div",{staticClass:"col-xs-4"},[t("img",{attrs:{src:e.image,alt:"captcha"},on:{click:e.reset_image}})])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-xs-8"}),e._v(" "),t("div",{staticClass:"col-xs-4"},[t("button",{staticClass:"btn btn-primary btn-block btn-flat login",attrs:{type:"submit",disabled:e.isClick}},[e.isClick?t("i",{staticClass:"fa fa-spinner fa-spin "}):e._e(),e._v(" 登陆\n          ")])])])])])])},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("div",{staticClass:"login-logo"},[a("a",{attrs:{href:"#"}},[this._v("Vue-Flask-Admin")])])}]},o=t("VU/8")(s,i,!1,null,null,null);a.default=o.exports}});
//# sourceMappingURL=12.8ab07ed8b3733cea4516.js.map